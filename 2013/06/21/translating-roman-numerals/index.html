<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>shaun mccormick :: </title>

    <meta name="author" content="Shaun McCormick" />
    <meta name="description" content="blog of shaun mccormick" />
    <meta name="keywords" content="software engineering, php, ruby, modx, xpdo, cms, algorithms" />
    <meta name="robots" content="index, follow, noarchive" />
    <meta name="googlebot" content="noarchive" />
    <link href="/assets/css/styles-85582c8e.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/css/pygment_trac-2808c9de.css" media="screen" rel="stylesheet" type="text/css" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>

        <img width="120" class="avatar" src="/assets/images/shaun-19cf98a9.jpg" />
        <h2 class="name"><a href="/">shaun mccormick</a></h2>
        <p class="tagline">programming and software architecture</p>

        <p></p>

        <ul class="social">
          <li><a href="/portfolio/">portfolio</a></li>
          <li><a href="http://splittingred.s3.amazonaws.com/resume.pdf">resume</a> (in <a href="https://github.com/splittingred/resume">gem form</a>)</li>
          <li><a href="http://linkedin.com/in/splittingred">linkedin</a></li>
          <li><a href="https://github.com/splittingred">github</a></li>
          <li><a href="http://twitter.com/splittingred">@splittingred</a></li>
          <li><a href="mailto:&#115;&#112;&#108;&#105;&#116;&#116;&#105;&#110;&#103;&#114;&#101;&#100;@&#103;&#109;&#97;&#105;&#108;.&#99;&#111;&#109;">email</a></li>
        </ul>

        <a class="button" href="mailto:&#115;&#112;&#108;&#105;&#116;&#116;&#105;&#110;&#103;&#114;&#101;&#100;@&#103;&#109;&#97;&#105;&#108;.&#99;&#111;&#109;">Contact Me</a>

        <!--
        <h3>Categories</h3>
        <ul class="tags">
          
            <li><a href="tags/modx">modx</a></li>
          
            <li><a href="tags/commenting">commenting</a></li>
          
            <li><a href="tags/recaptcha">recaptcha</a></li>
          
            <li><a href="tags/tagging">tagging</a></li>
          
            <li><a href="tags/taxonomy">taxonomy</a></li>
          
            <li><a href="tags/agile">agile</a></li>
          
            <li><a href="tags/community">community</a></li>
          
            <li><a href="tags/extras">extras</a></li>
          
            <li><a href="tags/wordpress">wordpress</a></li>
          
            <li><a href="tags/middleman">middleman</a></li>
          
            <li><a href="tags/ruby">ruby</a></li>
          
            <li><a href="tags/markdown">markdown</a></li>
          
            <li><a href="tags/kag">kag</a></li>
          
            <li><a href="tags/algorithms">algorithms</a></li>
          
            <li><a href="tags/php">php</a></li>
          
            <li><a href="tags/roman">roman</a></li>
          
            <li><a href="tags/math">math</a></li>
          
            <li><a href="tags/programming">programming</a></li>
          
        </ul>
        -->
      </header>
          <section class="post">
    <p style="font-size:.8em;"><a href="/">&lt;- home</a></p>

    <h1>Translating Roman Numerals</h1>
    <div class="meta">
      <time>Jun 21, 2013 </time>
      <span class="comments">(<a href="/2013/06/21/translating-roman-numerals/#disqus_thread" data-disqus-identifier="/2013/06/21/translating-roman-numerals/"></a>)</span>
      <!--<span class="tags">Tags: php, roman, math, programming</span>-->
    </div>

    <p>Earlier today I was packing up a great book on the decline of the Roman Empire, called
<a href="http://www.amazon.com/The-Inheritance-Rome-Illuminating-400-1000/dp/0143117424">&ldquo;The Inheritance of Rome&rdquo;</a>, of which
I highly recommend. The author goes into how Rome never really declined, but slowly atrophied, due to a combination of
decentralizing social structures, the collapse of the Roman transporation system and maintenance of roads, and how
the inability of Rome to collect proper taxation later on was one of the main catalysts to the fall. Fascinating book.</p>

<p>But that&rsquo;s not the point of this article. The book got me thinking; is there a way to convert Roman numerals into
standard Western numerals? Specifically, could I do this in PHP? Well, why not?</p>

<h3>Alphabets and Numbers</h3>

<p>Most all of us know the representation for Roman numerals today. I put these into a simple PHP associative array for
easy mapping:</p>
<pre class="highlight text">$map = array(
    &#39;I&#39; =&gt; 1,
    &#39;V&#39; =&gt; 5,
    &#39;X&#39; =&gt; 10,
    &#39;L&#39; =&gt; 50,
    &#39;C&#39; =&gt; 100,
    &#39;D&#39; =&gt; 500,
    &#39;M&#39; =&gt; 1000,
);
</pre>
<p>Seems simple enough, right? Just a straightforward string-replacement iteration and sum, right? Here&rsquo;s our method:</p>
<pre class="highlight text">function etTuBrute($str,array $map) {
    $len = strlen($str);
    $total = 0;
    for ($i=0;$i&lt;$len;$i++) {
        $current = $str[$i];
        $total += $map[$current];
    }
    return $total;
}
</pre>
<p>So, this makes the following values:</p>
<pre class="highlight text">echo etTuBrute(&#39;XVI&#39;,$map); // 16
echo etTuBrute(&#39;MXI&#39;,$map); // 1011
echo etTuBrute(&#39;LVI&#39;,$map); // 56
// ...
echo etTuBrute(&#39;XIX&#39;,$map); // 21 (wrong!)
echo etTuBrute(&#39;MCDLXXIX&#39;,$map); // 1681 (wrong!)
</pre>
<p>Dang. Nope. Those Romans, they were tricksy folk. As most of you probably remember, the way Roman numerals work is that you
start off with the highest-value character first, and then proceed rightward in descending value. So, XVI is &ldquo;10-5-1&rdquo;,
which added together makes 16.</p>

<p>However, there&rsquo;s the little catch they did, which is that if you run into a <em>higher</em> value number after a lower one,
that means that the lower value number is actually a combination number. In other words, XIX is 19, since X = 10, and
IX = 9.</p>

<p>So how is this done logically? Well, we still can loop through the characters in the string, but we&rsquo;ll need to do some
&ldquo;pre-checking&rdquo; to make sure the current character is of the same or higher value than the lesser character. So here&rsquo;s
our function now:</p>
<pre class="highlight text">function etTuBrute($str,array $map) {
    $len = strlen($str);
    $total = 0;
    for ($i=0;$i&lt;$len;$i++) {
        $current = $str[$i];
        if ($i === $len - 1) {
            $total += $map[$current];
        } else {
            $total += $map[$current] &lt; $map[$str[$i+1]] ? -$map[$current] : $map[$current];
        }
    }
    return $total;
}
</pre>
<p>And our results from earlier:</p>
<pre class="highlight text">echo etTuBrute(&#39;XVI&#39;,$map); // 16
echo etTuBrute(&#39;MXI&#39;,$map); // 1011
echo etTuBrute(&#39;LVI&#39;,$map); // 56
// ...
echo etTuBrute(&#39;XIX&#39;,$map); // 19
echo etTuBrute(&#39;MCDLXXIX&#39;,$map); // 1479
</pre>
<p>Great! It works now. So in the loop, we first see if the character position is at the end. If so, we know that it&rsquo;s
value will always be what it says it is, so we just add it to the sum. If it&rsquo;s not the end, we then go check to see
what the value of the next character is. If that value is higher, we <em>subtract</em> the current value from the sum, since
that&rsquo;s really what Roman numerals are doing by prepending the lower-valued character.</p>

<p>This gets us the right values, and a great little translation function! Carpe diem!</p>


    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'splittingredcom'; // required: replace example with your forum shortname
        var disqus_identifier = '/2013/06/21/translating-roman-numerals/';
        var disqus_title = 'Translating Roman Numerals';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

  </section>

  <script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'splittingredcom'; // required: replace example with your forum shortname

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = '//' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
  </script>


      <footer>
        <p>&copy; 2010-2013 <a href="mailto:&#115;&#112;&#108;&#105;&#116;&#116;&#105;&#110;&#103;&#114;&#101;&#100;@&#103;&#109;&#97;&#105;&#108;.&#99;&#111;&#109;">shaun mccormick</a>. all rights reserved.</p>
      </footer>
    </div>
    <script src="/assets/js/scale.fix-f7763733.js" type="text/javascript"></script>

  </body>
</html>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-13101242-2");
pageTracker._trackPageview();
} catch(err) {}</script>